/*! Charcoal-Validate 04-09-2014 */
!function(a){"use strict";a.fn.lvalidate=function(b){var c={requiredClass:"required",similarClass:"similar",requiredGroupClass:"required-group",regExpClass:"regexp",onError:function(){},onSuccess:function(){},onFirstError:function(){},custom_validation:function(){return!0},invalid:function(){}};if("string"==typeof b&&a(this).data("lvalidate")){var d=a(this).data("lvalidate");switch(b){case"validate":return d.validate(),this;default:return this}}var e=a.extend(c,b);return a(this).each(function(){e.obj=a(this);var b=new Locomotive_Validate(e);a(this).data("lvalidate",b)}),a(this).on("click","[type=submit]",function(b){b.preventDefault();var c=a(this).parents("form"),d=c.data("lvalidate");d.validate()}),this}}(jQuery);var Locomotive_Validate=function(a){a&&(this.obj=a.obj,this.settings=a),this.invalidInputs=Array(),this.validate=function(){this.form=this.obj;var a=this.form.find("."+this.settings.requiredClass),b=this.form.find("."+this.settings.similarClass),c=this.form.find("."+this.settings.requiredGroupClass),d=this.form.find("."+this.settings.regExpClass);this.form.find(".error").removeClass("error");var e=this,f=!0,g=!0;a.each(function(){var a=e.validate_input($(this));f=f&&!a,!f&&g&&(g=!1,e.settings.onFirstError($(this),"First Error"))}),b.each(function(){var a=e.validate_input($(this),"similar");f=f&&!a,!f&&g&&(g=!1,e.settings.onFirstError($(this),"First Error"))});if(c.each(function(){var a=$(this),b=a.data(),c=e.validate_input($(this),"required-group",b);f=f&&!c}),d.each(function(){var a=$(this),b=a.data(),c=e.validate_input($(this),"regex",b);f=f&&!c}),f&&"function"==typeof this.settings.custom_validation){var h=this.settings.custom_validation(this);f=f&&h,!f&&g&&(g=!1,e.settings.onFirstError(!1,"Custom Error"))}f?this.settings.valid(this.obj):this.settings.invalid(this.obj)},this.validate_input=function(a,b,c){b||(b="required");var d=a,e=this,f=d.data();if("undefined"!=typeof f.luhn&&(b="luhn"),"undefined"!=typeof f.regexp&&(b="regexp"),"regexp"==b)return this.matchRegExp(d,f)?e.success(d,"ok"):e.error(d,"regex_err");if("luhn"==b)return this.check_luhn(this.get_value(d),f)?e.success(d,"ok"):e.error(d,"luhn_error");if("required"==b){var g=d.prop("tagName"),h=d.attr("type"),i=d.attr("name");if("INPUT"==g){if("text"==h||"password"==h||"phone"==h||"tel"==h)return this.isEmpty(d)?e.error(d,"empty"):e.success(d,"ok");if("radio"==h){var j=this.obj.find("input[name="+i+"]");return this.isRadioEmpty(j)?e.error(j,"empty"):e.success(j,"ok")}if("checkbox"==h)return this.isChecked(d)?e.success(d,"ok"):e.error(d,"empty");if("email"==h)return this.isValidEmail(d)?e.success(d,"ok"):e.error(d,"invalid_mail")}if("TEXTAREA"==g)return this.isEmpty(d)?e.error(d,"empty"):e.success(d,"ok");if("SELECT"==g)return this.isSelectEmpty(d)?e.error(d,"unselected"):e.success(d,"ok")}if("similar"==b){if(d.attr("data-related")){var k=d.attr("data-related"),l=this.form.find("[name="+k+"]");return this.isDifferent([d,l])?e.error(l,"similar",d):e.success(l,"Similar")}return e.success(d,"no-related-elements")}if("required-group"==b&&c){var m,n=!1;c.required.indexOf("[]")>0?(n=!0,m=c.required.substr(0,c.required.indexOf("[]"))):m=c.required.replace(" ","").split(",");var o=!1,p=Array(),q=n?e.form.find("[name^="+m+"]"):"";if(q.length)q.each(function(){var a=$(this);if(a.length&&p.push(a),!o&&a.length&&!o){var b=!e.isEmptySmart(a);o=!!b}});else for(var r=0;r<m.length;r++){var s=e.form.find("[name="+m[r]+"]");if(s.length&&p.push(s),!o&&s.length&&!o){var t=!e.isEmptySmart(s);o=!!t}}return o?e.success(d,"required_group",p):e.error(d,"required_group",p)}},this.error=function(a,b,c){return this.settings.onError(a,b,c),!0},this.success=function(a,b,c){return this.settings.onSuccess(a,b,c),!1},this.listeners=function(){},this.isEmptySmart=function(a){var b=a,c=b.prop("tagName"),d=b.attr("type"),e=b.attr("name");if("INPUT"==c){if("text"==d||"password"==d)return this.isEmpty(b);if("radio"==d){var f=this.obj.find("input[name="+e+"]");return this.isRadioEmpty(f)}if("checkbox"==d)return!this.isChecked(b);if("email"==d)return!this.isValidEmail(b)}return"TEXTAREA"==c?this.isEmpty(b):"SELECT"==c?this.isSelectEmpty(b):void 0},this.isEmpty=function(a){return""===a.val()||!a.val()||"-1"==a.val()},this.isValidEmail=function(a){var b=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i;return b.test(a.val())},this.isSelectEmpty=function(a){return this.isEmpty(a.find("option:selected"))},this.isChecked=function(a){return a.is(":checked")},this.isRadioEmpty=function(a){var b=!0;return a.each(function(){$(this);$(this).is(":checked")&&(b=!1)}),b},this.matchRegExp=function(a,b){var c=b,d=this.get_value(a),e="gi";"undefined"!=typeof c.modifiers&&(e=c.modifiers);var f=new RegExp(b.regexp,e);return f.test(d)},this.isDifferent=function(a){for(var b=!1,c="",d=this,e=0;e<a.length;e++)0!==e?c!=d.get_value(a[e])&&(b=!0):c=d.get_value(a[e]);return b},this.get_value=function(a){var b=a,c=b.prop("tagName"),d=b.attr("type"),e=b.attr("name");if("INPUT"==c){if("text"==d||"email"==d||"password"==d||"tel"==d)return b.val();if("checkbox"==d)return b.is(":checked")?b.val():"";if("radio"==d){var f=this.obj.find("input[name="+e+"]");return f.each(function(){return $(this).is(":checked")?b.val():void 0}),""}}return"TEXTAREA"==c?b.val():"SELECT"==c?b.find("option:selected").val():void 0},this.check_luhn=function(a){if(!a)return!1;if(/[^0-9-\s]+/.test(a))return!1;var b=0,c=0,d=!1;a=a.replace(/\D/g,"");for(var e=a.length-1;e>=0;e--){var f=a.charAt(e);c=parseInt(f,10),d&&(c*=2)>9&&(c-=9),b+=c,d=!d}return b%10===0}};